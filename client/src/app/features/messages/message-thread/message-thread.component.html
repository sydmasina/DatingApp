<div class="thread-container">
  @if(messageThread() && messageThread().length > 0){
  <div class="d-flex gap-1 align-items-center">
    <img
      [src]="userPhotoUrl() || './assets/images/user-icon.jpeg'"
      class="image-thumb-nail"
      alt="recipientPhotoUrl"
      (click)="onOpenProfile()"
    />
    <strong>{{ username() | titlecase }}</strong>
  </div>
  <hr />
  <div class="thread-body">
    @for (message of messageThread(); track message.id) {
    @if(message.senderUsername === currentUser){
    <div class="row justify-content-end mb-3">
      <div class="col-10 sender-card">
        <p>{{ message.content }}</p>
      </div>
    </div>
    }@else {
    <div class="row justify-content-start align-items-end mb-3">
      <img
        [src]="userPhotoUrl() || './assets/images/user-icon.jpeg'"
        class="chat-image-thumb-nail"
        alt="recipientPhotoUrl"
        (click)="onOpenProfile()"
      />
      <div class="col-10 recipient-card">
        <p>{{ message.content }}</p>
      </div>
    </div>
    } }
  </div>
  <hr />
  <div class="input-group mb-3">
    <input
      type="text"
      class="form-control"
      [formControl]="newMessageControl"
      [placeholder]="'Message ' + (username() | titlecase)"
      aria-describedby="basic-addon2"
    />
    <button
      class="input-group-text send-button"
      id="basic-addon2"
      (click)="sendMessage()"
    >
      Send
    </button>
  </div>
  }@else {
  <h4>Fetching messages...</h4>
  }
</div>
